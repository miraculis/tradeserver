apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.8.1'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.8.1'
    compile group: 'com.fasterxml.jackson.datatype', name:'jackson-datatype-jsr310', version:'2.8.1'
    compile group: 'io.netty', name: 'netty-all', version: '4.1.9.Final'
    compile group: 'org.projectlombok', name: 'lombok', version: '1.16.16'
    compile group: 'junit', name: 'junit', version: '4.12'

}

jar {
    baseName = 'candles'
    version =  '0.1.0'
}

task sourcesJar(type: Jar) {
    appendix = 'sources'
    from sourceSets.main.allJava
}

task customZip(type: Zip) {
    from ('.') {
        include '*.bat'
        include 'build.gradle'
    }
    from ('build/libs') {
	include '*.jar'
	into 'libs'
    }
}

task copyLibs(type: Copy) {
	from configurations.runtime {
	    into 'build/libs'
	}
}

customZip.dependsOn(copyLibs)

artifacts {
	archives sourcesJar
	archives customZip
}